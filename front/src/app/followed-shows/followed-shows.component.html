<div class="container showFollow">
  <div>
    <h1 class="text-white">My shows</h1>
  </div>
  <div class="mat-accordionDiv">


    <mat-accordion class="accordion-show">

      <mat-expansion-panel class="collapse-show" *ngFor="let show of (followedShow | keyvalue : originalOrder)">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{show.value.information.name}}
          </mat-panel-title>
          <mat-panel-description>
            {{(show.value.seasons | keyvalue).length}} seasons
          </mat-panel-description>
        </mat-expansion-panel-header>
        <!--seasons-->
        <mat-accordion>
          <!--one season-->
          <mat-expansion-panel class="collapse-season" *ngFor="let season of (show.value.seasons | keyvalue : originalOrder)">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <div *ngIf="season.value.name != '' else elseBlock">Season number {{season.value.numberSeasonInshow}}:{{season.value.name}}</div>

                <ng-template #elseBlock>Season number {{season.value.numberSeasonInshow}}</ng-template>
              </mat-panel-title>
              <mat-panel-description>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-card class="card-episode" *ngFor="let episode of (season.value.episodes | keyvalue : originalOrder)">

              <div class="row">
                <mat-card-header class="col-5">
                  {{season.value.numberSeasonInshow}}x{{episode.value.episodeNumber}}
                  {{episode.value.name}}

                </mat-card-header>
                <mat-card-content class="col-5">
                  <ng-template #popContent>

                    <div class="row">
                      <div class="col-md-8">
                        <p class="text-black">
                          <b>{{episode.value.name}}</b>
                        </p>
                        <p [innerHTML]="episode.value.summary"></p>

                      </div>
                      <div class="col-md-4">
                        <img src={{episode.value.urlMediumImage}} alt="">
                      </div>
                    </div>
                  </ng-template>
                  <ng-template #popTitle>
                    <p class="text-black">{{episode.value.name}}</p>
                  </ng-template>
                  <button type="button" class="btn btn-outline-info" [ngbPopover]="popContent" [popoverTitle]="popTitle"
                    triggers="mouseenter:mouseleave">
                    summary
                  </button>
                </mat-card-content>

                <div>
                  <fa-layers [fixedWidth]="true" style="cursor:pointer" (click)="markEpisode(1)">
                    <fa-icon [icon]="faEye" [styles]="{ 'color': '#57A8EF'}" data-toggle="tooltip" data-placement="top"
                      title="mark this episode" size="lg">
                    </fa-icon>
                  </fa-layers>
                </div>
                <div class="ml-1">
                  <fa-layers [fixedWidth]="true" style="cursor:pointer" (click)="unMarkEpisode(1)">
                    <fa-icon [icon]="faEyeSlash" [styles]="{ 'color': '#FD7D7B'}" data-toggle="tooltip"
                      data-placement="top" title="unmark this episode" size="lg">
                    </fa-icon>
                  </fa-layers>
                </div>
              </div>


            </mat-card>

          </mat-expansion-panel>

        </mat-accordion>

        <mat-action-row>
          <fa-layers [fixedWidth]="true" style="cursor:pointer" (click)="unFollowShow(1)">
            <fa-icon [icon]="faTrash" [styles]="{ 'color': '#FD7D7B'}" data-toggle="tooltip" data-placement="top"
              title="unfollow this show" size="small">
            </fa-icon>

          </fa-layers>
        </mat-action-row>
      </mat-expansion-panel>
    </mat-accordion>


  </div>
</div>